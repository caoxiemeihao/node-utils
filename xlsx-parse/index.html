<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello Ning ning er!</title>
    <link rel="stylesheet" href="./front/bootstrap.css">
    <style>
      body { padding-bottom: 90px; }
      .download-box { position: fixed; top: 0; bottom: 60px; right: 0; width: 140px; overflow: auto; background: #fff; box-shadow: 0 0 1px #ccc; transform: translateX(100%); transition: 400ms; }
      .download-box.actived { transform: translateX(0); }
    </style>
  </head>
  <body>
    <!-- All of the Node.js APIs are available in this renderer process. -->
    <!-- We are using Node.js <script>document.write(process.versions.node)</script>,
    Chromium <script>document.write(process.versions.chrome)</script>,
    and Electron <script>document.write(process.versions.electron)</script>. -->

    <div id="app" class="container-fluid">
      <div class="pt-2">
        <span class="btn btn-light btn-sm mr-2" onclick="window.location.reload(true)">刷新</span>
        <span class="btn btn-light btn-sm mr-2" @click="chooseSaveFilePath">选择下载路径</span>
        <span class="btn btn-light btn-sm" @click="uploadFile">上传文件</span>
        <span
          class="btn btn-sm"
          :class="showDownloadPanel ? 'btn-danger' : 'btn-light'"
          @click="toggleDownloadPanel">{{showDownloadPanel ? '关闭' : '下载面板'}}</span>
      </div>
      <div class="alert alert-dark mt-2">{{downloadPath}}</div>
      <div class="select-box">
        <span class="btn btn-info btn-sm" @click="pickAll(true)">全选</span>
        <span class="btn btn-light btn-sm" @click="pickAll(false)">全不选</span>
        <span class="btn btn-primary btn-sm" @click="startDownload()">开始下载</span>
        <div class="pt-2">
          <span
            v-for="item, idx of downloadArr"
            class="btn btn-sm mr-2 mb-2 summary"
            :class="item.pick ? 'alert-info' : 'alert-secondary'"
            @click="pickItem(item, idx)">
            <span class="badge badge-pill badge-danger">{{idx}}</span>
            {{item.OrderNumber}}
          </span>
        </div>
      </div>

      <div :class="['download-box', showDownloadPanel ? 'actived' : '']">
        <div
          v-for="item in downloadActArr"
          class="alert download-item rounded-0 "
          :class="item.error ? 'alert-danger' : 'alert-warning'"
        >
          <span>{{item.OrderNumber}}</span>
        </div>
      </div>

      <div class="fixed-bottom alert alert-info rounded-0 d-flex m-0">
        <div class="flex-fill">
          {{logInfo}}
        </div>
        <div class="flex-fill text-right">
          <span class="">当前 {{local_version}}</span>
          <span class="ml-2">最新 {{remote_version}}</span>
          <span
            class="ml-2 btn btn-sm"
            :class="remote_version !== local_version ? 'btn-success' : 'btn-light'"
            @click="upgradeApp"
          >升级</span>
        </div>
      </div>
    </div>



    <script src="./front/vue.js"></script>
    <script>
      // You can also require other files to run in this process
      const { config }  = require('./config')
      require('./renderer.js')
      require('./version.js')

      if (config.env === 'development') {
        // Connect to server process
        require('electron-connect').client.create()
      }
    </script>
  </body>
</html>
